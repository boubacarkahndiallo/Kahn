const fs = require('fs'); const s = fs.readFileSync('./public/js/client.js', 'utf8'); const lines = s.split('\n'); let paren = 0, brace = 0, brack = 0; let inSingle = false, inDouble = false, inBack = false, inLine = false, inBlock = false; for (let li = 0; li < lines.length; li++) { const line = lines[li]; for (let i = 0; i < line.length; i++) { const ch = line[i]; const next = line[i + 1]; if (inLine) { inLine = false; break; } if (inBlock) { if (ch === '*' && next === '/') { inBlock = false; i++; continue; } continue; } if (inSingle) { if (ch === '\\' && next) { i++; continue; } if (ch === "'") inSingle = false; continue; } if (inDouble) { if (ch === '\\' && next) { i++; continue; } if (ch === '"') inDouble = false; continue; } if (inBack) { if (ch === '\\' && next) { i++; continue; } if (ch === '`') inBack = false; continue; } if (ch === '/') { if (next === '/') { inLine = true; break; } if (next === '*') { inBlock = true; i++; continue; } } if (ch === "'") { inSingle = true; continue; } if (ch === '"') { inDouble = true; continue; } if (ch === '`') { inBack = true; continue; } if (ch === '(') paren++; else if (ch === ')') paren--; else if (ch === '{') brace++; else if (ch === '}') brace--; else if (ch === '[') brack++; else if (ch === ']') brack--; } if (paren !== 0 || brace !== 0 || brack !== 0) { console.log('Line', li + 1, 'counts p,b,br', paren, brace, brack); } }
console.log('End counts', paren, brace, brack);
