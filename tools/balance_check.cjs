const fs = require('fs'); const s = fs.readFileSync('./public/js/client.js', 'utf8'); let paren = 0, brace = 0, bracket = 0; let inSingle = false, inDouble = false, inBack = false, inLine = false, inBlock = false; for (let i = 0; i < s.length; i++) { const ch = s[i]; const next = s[i + 1]; if (inLine) { if (ch === '\n') inLine = false; continue; } if (inBlock) { if (ch === '*' && next === '/') { inBlock = false; i++; continue; } continue; } if (inSingle) { if (ch === '\\' && next) { i++; continue; } if (ch === "'") inSingle = false; continue; } if (inDouble) { if (ch === '\\' && next) { i++; continue; } if (ch === '"') inDouble = false; continue; } if (inBack) { if (ch === '\\' && next) { i++; continue; } if (ch === '`') inBack = false; continue; } if (ch === '/') { if (next === '/') { inLine = true; i++; continue; } if (next === '*') { inBlock = true; i++; continue; } } if (ch === "'") { inSingle = true; continue; } if (ch === '"') { inDouble = true; continue; } if (ch === '`') { inBack = true; continue; } if (ch === '(') paren++; else if (ch === ')') paren--; else if (ch === '{') brace++; else if (ch === '}') brace--; else if (ch === '[') bracket++; else if (ch === ']') bracket--; if (paren < 0 || brace < 0 || bracket < 0) { console.log('Unbalanced at pos', i, 'line', s.slice(0, i).split('\n').length, 'ch', ch); break; } } console.log('Final counts -> paren:', paren, 'brace:', brace, 'bracket:', bracket);
